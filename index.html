<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Code Generator with StarCoder2</title>
  </head>
  <body>
    <h2>Enter your code prompt</h2>
    <textarea
      id="inputText"
      rows="5"
      cols="50"
      placeholder="e.g., def fibonacci(n):"
    ></textarea
    ><br />
    <button onclick="sendInput()">Generate Code</button>
    <h3>Output:</h3>
    <pre id="result"></pre>

    <script>
      function sendInput() {
        const input = document.getElementById('inputText').value;

        fetch("/.netlify/functions/starcoder", {
  method: "POST",
  headers: { "Content-Type": "application/x-www-form-urlencoded" },
  body: `input=${encodeURIComponent(input)}`
})
)
          .then((response) => response.json())
          .then((data) => {
            const output = data[0]?.generated_text || 'No response';
            document.getElementById('result').innerText = output;
          })
          .catch((error) => {
            console.error('Error:', error);
            document.getElementById('result').innerText =
              'Error calling model.';
          });
      }
    </script>
  </body>
</html>
